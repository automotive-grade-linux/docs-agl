<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <meta name="description" content=" ">

    <title>
	    AGL Developer Site - 
        
            
                Signaling Architecture  -
            
        
    </title>

    <link rel="SHORTCUT ICON" href="/favicon.ico"/>

    

    
    

    <link rel="canonical" href="http://docs.automotivelinux.org/docs/apis_services/en/dev/reference/signaling/architecture.html">

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/static/styles/main.css">
    <link rel="stylesheet" type="text/css" href="/static/styles/syntax.css">
    <!-- Algolia Search CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />

    <!-- Fonts -->
    <!-- For attribution information, see www/attributions.html -->
    <link href='https://fonts.googleapis.com/css?family=Raleway:700,400,300,700italic,400italic,300italic' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- <script defer type="text/javascript">
        var disqus_developer = ; // this would set it to developer mode
    </script>-->

    <!-- JS -->
    <script defer type="text/javascript" src="/static/js/lib/jquery-2.1.1.min.js"></script>
    <script defer type="text/javascript" src="/static/js/lib/bootstrap.min.js"></script>
<!--    <script defer type="text/javascript" src="/static/js/lib/ZeroClipboard.js"></script>-->

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', '{}', 'auto');
    ga('send', 'pageview');
</script>

</head>

<body>
    <header>
    <a class="scroll-point pt-top" name="top"></a>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="/"><img id="logo_top" src="/static/img/branding/agl_title_793x211.png"/></a>
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <div class="nav_bar_left">
                    <ul class="nav navbar-nav">
                        <li >
                            <a href="/docs/getting_started/en/dev/">Getting Started</a>
                        </li>
                                                
                        <li >
                            <a href="/docs/architecture/en/dev/">Architecture Guides</a>
                        </li>

                        <li >
                            <a href="/docs/hardware/en/dev/">Hardware Support</a>
                        </li>

                        <li >
                            <a href="/docs/devguides/en/dev/">Developer Guides</a>
                        </li>
                        
                        <li >
                            <a href="/docs/apis_services/en/dev/">APIs & Services</a>
                        </li>
					</ul>
				</div>
                <div class="nav_bar_right">
                    <ul class="nav navbar-nav">

                        <li >
                            <a href="/contribute">Contribute</a>
                        </li>
                        <li>
                            <form class="navbar-form navbar-right" id="header-search-form" role="search">
                                <div class="input-group">
                                    
                                    <input id="header-search-field" type="text" placeholder="Search 'dev' docs..." class="form-control hidden-xs" autocomplete="off">
                                </div>
                            </form>
                        </li>
                    </ul>
                </div>
            </div><!--/.navbar-collapse -->
        </div>
    </nav>
    <div id="_fixed_navbar_spacer" style="padding-top:50px"></div>
</header>














<div class="docs container">

    <!-- Table of Contents -->
    <div class="hidden-xs hidden-sm col-md-4 col-lg-3 site-toc-container">
        <ul class="site-toc">
    

    <li>
        
            <span class="toc-section-heading">
                Application Framework
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-main/0-introduction.html">
                Introduction
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-main/1-afm-daemons.html">
                The afm daemons
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-main/2-widgets.html">
                Widgets
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-main/2.1-widgets.html">
                Overview of widgets
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-main/2.2-config.xml.html">
                Widget configuration file
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-main/3-permissions.html">
                Permissions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-main/4-quick-tutorial.html">
                Quick Tutorial
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Application Framework Binder
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/afb-overview.html">
                Overview
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/afb-daemon-vocabulary.html">
                Binder daemon vocabulary
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/afb-binding-writing.html">
                How to write a binding ?
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Binder references
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/reference-v3/types-and-globals.html">
                Types and globals
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/reference-v3/macro-log.html">
                Macros for logging
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/reference-v3/func-api.html">
                Functions of class afb_api
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/reference-v3/func-req.html">
                Functions of class afb_req
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/reference-v3/func-event.html">
                Functions of class afb_event
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/reference-v3/func-daemon.html">
                Functions of class afb_daemon
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/reference-v3/func-service.html">
                Functions of class afb_service
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/afb-events-guide.html">
                Binder events guide
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/afb-application-writing.html">
                Binder Application writing guide
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Annexes
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/afb-migration-to-binding-v3.html">
                Migration to bindings v3
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/protocol-x-afb-ws-json1.html">
                WebSocket protocol x-afb-ws-json1
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/afb-desktop-package.html">
                Installing the binder on a desktop
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/afb-daemon-options.html">
                Options of afb-daemon
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/afb-daemon-debugging.html">
                Debugging binder and bindings
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/legacy/afb-migration-v1-to-v2.html">
                LEGACY Migration from v1 to v2
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/legacy/afb-binding-v2-references.html">
                LEGACY Binding V2 references
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/REVISIONS.html">
                Document revision
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                AGL Test Framework
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/afb-test/Installation.html">
                Installation
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/afb-test/write-the-tests.html">
                Write the tests
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/afb-test/the-test-widget.html">
                The test widget
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/afb-test/launch-the-tests.html">
                Launch the tests
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/afb-test/tests-examples.html">
                Tests examples
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                References
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/afb-test/binding-test-functions.html">
                Binding Test Functions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/afb-test/binding-assert-functions.html">
                Binding Assert Functions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/afb-test/test-framework-functions.html">
                Test Framework Functions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                LuaUnit Assertion Functions
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/afb-test/general-assertions.html">
                General Assertions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/afb-test/value-assertions.html">
                Value Assertions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/afb-test/scientific-assertions.html">
                Scientific Assertions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/afb-test/string-assertions.html">
                String Assertions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/afb-test/error-assertions.html">
                Error Assertions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/afb-test/type-assertions.html">
                Type Assertions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/afb-test/table-assertions.html">
                Table Assertions
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    
</ul>

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Message Signaling
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="this-page" href="/docs/apis_services/en/dev/reference/signaling/architecture.html">
                Signaling Architecture
            </a>
            
                <span class="entry-highlight"></span>
            
        

        
        <div id="page-toc" class="page-toc"></div>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Low level CAN service Guide
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/low-can-architecture.html">
                Architecture presentation
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/low-can-installation-guide.html">
                Installation Guide
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/low-can-usage-guide.html">
                Usage Guide
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                High level ViWi service Guide
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/high-viwi-architecture.html">
                Architecture presentation
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/high-viwi-install-usage-guide.html">
                Installation and Usage Guide
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Signal Composer service Guide
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/signal-composer-architecture.html">
                Architecture presentation
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/signal-composer-configuration.html">
                Configuration
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/signal-composer-plugins.html">
                Plugins
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/signal-composer-api.html">
                Signal Composer API
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/iotbzh2016/signaling/AGL-Message-Signaling-Developer-Guidelines.pdf">
                Developer Guidelines
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/iotbzh2016/signaling/AGL-AppFW-CAN-Signaling-Benchmark.pdf">
                CAN Signaling Benchmark
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                CanDevStudio Quickstart
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/candevstudio/docs/1_Usage.html">
                Usage Guide
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/candevstudio/docs/2_can_device_socketcan_backend.html">
                Bringing up a CAN device using socketcan backend
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/candevstudio/docs/3_Add_CAN_Device.html">
                Add a CAN device in CANdevStudio
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/candevstudio/docs/4_Configure_CanRawSender_Node.html">
                Configure a CanRawSender node
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/candevstudio/docs/5_Using_CanRawView.html">
                Using CanRawView
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/resources.html">
                Resources
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Audio Framework
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/audio/bluez-alsa.html">
                bluez-alsa
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/audio/pulseaudio-module-4a.html">
                Pulseaudio - 4A Integration Module
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                4a Framework
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/audio/4a-framework/README.html">
                Architecture
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/audio/4a-framework/concepts.html">
                Concepts
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/audio/4a-framework/components.html">
                Components
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                high-level-api
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/audio/high-level-api/README.html">
                Abstract
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/audio/high-level-api/kickstart.html">
                Kickstart
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/audio/high-level-api/reference.html">
                Reference
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Tips And Tricks
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/audio/high-level-api/TipsAndTricks/AdjustVolumes.html">
                Adjust volumes
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/audio/high-level-api/TipsAndTricks/4aTools.html">
                4a-tools
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/audio/high-level-api/TipsAndTricks/Devices.html">
                Devices
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/audio/high-level-api/TipsAndTricks/HALs.html">
                HALs
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    
</ul>

        
    </li>
    
</ul>

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                HMI Framework
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/hmi-framework/3_1-HomeScreen-Guide.html">
                Home Screen Developper Guide
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/hmi-framework/3_2-WindowManager-Guide.html">
                Window Manager Developper Guide
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/hmi-framework/3_3-SoundManager-Guide.html">
                Sound Manager Developper Guide
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                HomeScreen (old)
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/homescreen/homescreen_api.html">
                HomeScreen API
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    
</ul>

    </div>

    <!-- Page content -->
    <div class="col-md-8 col-md-offset-4 col-lg-9 col-lg-offset-3 page-content-container container">
        <div class="page-content row">
            <div class="col-md-offset-1 col-md-10">
                <div class="content-header">

                    <!-- ToC Dropdown (for XS and SM sizes only) -->
                    <div class="toc-dropdown dropdown visible-xs-block visible-sm-block">
                        <button class="btn btn-default dropdown-toggle" type="button" id="tocDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Table of Contents
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            






<li>
    <a class="" href="reference/af-main/0-introduction.html">
        Introduction
    </a>
</li>




<li>
    <a class="" href="reference/af-main/1-afm-daemons.html">
        The afm daemons
    </a>
</li>




<li>
    <a class="" href="reference/af-main/2-widgets.html">
        Widgets
    </a>
</li>




<li>
    <a class="" href="reference/af-main/2.1-widgets.html">
        Overview of widgets
    </a>
</li>




<li>
    <a class="" href="reference/af-main/2.2-config.xml.html">
        Widget configuration file
    </a>
</li>




<li>
    <a class="" href="reference/af-main/3-permissions.html">
        Permissions
    </a>
</li>




<li>
    <a class="" href="reference/af-main/4-quick-tutorial.html">
        Quick Tutorial
    </a>
</li>











<li>
    <a class="" href="reference/af-binder/afb-overview.html">
        Overview
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/afb-daemon-vocabulary.html">
        Binder daemon vocabulary
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/afb-binding-writing.html">
        How to write a binding ?
    </a>
</li>








<li>
    <a class="" href="reference/af-binder/reference-v3/types-and-globals.html">
        Types and globals
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/reference-v3/macro-log.html">
        Macros for logging
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/reference-v3/func-api.html">
        Functions of class afb_api
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/reference-v3/func-req.html">
        Functions of class afb_req
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/reference-v3/func-event.html">
        Functions of class afb_event
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/reference-v3/func-daemon.html">
        Functions of class afb_daemon
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/reference-v3/func-service.html">
        Functions of class afb_service
    </a>
</li>







<li>
    <a class="" href="reference/af-binder/afb-events-guide.html">
        Binder events guide
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/afb-application-writing.html">
        Binder Application writing guide
    </a>
</li>








<li>
    <a class="" href="reference/af-binder/afb-migration-to-binding-v3.html">
        Migration to bindings v3
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/protocol-x-afb-ws-json1.html">
        WebSocket protocol x-afb-ws-json1
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/afb-desktop-package.html">
        Installing the binder on a desktop
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/afb-daemon-options.html">
        Options of afb-daemon
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/afb-daemon-debugging.html">
        Debugging binder and bindings
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/legacy/afb-migration-v1-to-v2.html">
        LEGACY Migration from v1 to v2
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/legacy/afb-binding-v2-references.html">
        LEGACY Binding V2 references
    </a>
</li>







<li>
    <a class="" href="reference/af-binder/REVISIONS.html">
        Document revision
    </a>
</li>











<li>
    <a class="" href="reference/afb-test/Installation.html">
        Installation
    </a>
</li>




<li>
    <a class="" href="reference/afb-test/write-the-tests.html">
        Write the tests
    </a>
</li>




<li>
    <a class="" href="reference/afb-test/the-test-widget.html">
        The test widget
    </a>
</li>




<li>
    <a class="" href="reference/afb-test/launch-the-tests.html">
        Launch the tests
    </a>
</li>




<li>
    <a class="" href="reference/afb-test/tests-examples.html">
        Tests examples
    </a>
</li>








<li>
    <a class="" href="reference/afb-test/binding-test-functions.html">
        Binding Test Functions
    </a>
</li>




<li>
    <a class="" href="reference/afb-test/binding-assert-functions.html">
        Binding Assert Functions
    </a>
</li>




<li>
    <a class="" href="reference/afb-test/test-framework-functions.html">
        Test Framework Functions
    </a>
</li>








<li>
    <a class="" href="reference/afb-test/general-assertions.html">
        General Assertions
    </a>
</li>




<li>
    <a class="" href="reference/afb-test/value-assertions.html">
        Value Assertions
    </a>
</li>




<li>
    <a class="" href="reference/afb-test/scientific-assertions.html">
        Scientific Assertions
    </a>
</li>




<li>
    <a class="" href="reference/afb-test/string-assertions.html">
        String Assertions
    </a>
</li>




<li>
    <a class="" href="reference/afb-test/error-assertions.html">
        Error Assertions
    </a>
</li>




<li>
    <a class="" href="reference/afb-test/type-assertions.html">
        Type Assertions
    </a>
</li>




<li>
    <a class="" href="reference/afb-test/table-assertions.html">
        Table Assertions
    </a>
</li>

















<li>
    <a class="this-page" href="reference/signaling/architecture.html">
        Signaling Architecture
    </a>
</li>








<li>
    <a class="" href="reference/signaling/low-can-architecture.html">
        Architecture presentation
    </a>
</li>




<li>
    <a class="" href="reference/signaling/low-can-installation-guide.html">
        Installation Guide
    </a>
</li>




<li>
    <a class="" href="reference/signaling/low-can-usage-guide.html">
        Usage Guide
    </a>
</li>











<li>
    <a class="" href="reference/signaling/high-viwi-architecture.html">
        Architecture presentation
    </a>
</li>




<li>
    <a class="" href="reference/signaling/high-viwi-install-usage-guide.html">
        Installation and Usage Guide
    </a>
</li>











<li>
    <a class="" href="reference/signaling/signal-composer-architecture.html">
        Architecture presentation
    </a>
</li>




<li>
    <a class="" href="reference/signaling/signal-composer-configuration.html">
        Configuration
    </a>
</li>




<li>
    <a class="" href="reference/signaling/signal-composer-plugins.html">
        Plugins
    </a>
</li>




<li>
    <a class="" href="reference/signaling/signal-composer-api.html">
        Signal Composer API
    </a>
</li>







<li>
    <a class="" href="reference/iotbzh2016/signaling/AGL-Message-Signaling-Developer-Guidelines.pdf">
        Developer Guidelines
    </a>
</li>




<li>
    <a class="" href="reference/iotbzh2016/signaling/AGL-AppFW-CAN-Signaling-Benchmark.pdf">
        CAN Signaling Benchmark
    </a>
</li>








<li>
    <a class="" href="reference/candevstudio/docs/1_Usage.html">
        Usage Guide
    </a>
</li>




<li>
    <a class="" href="reference/candevstudio/docs/2_can_device_socketcan_backend.html">
        Bringing up a CAN device using socketcan backend
    </a>
</li>




<li>
    <a class="" href="reference/candevstudio/docs/3_Add_CAN_Device.html">
        Add a CAN device in CANdevStudio
    </a>
</li>




<li>
    <a class="" href="reference/candevstudio/docs/4_Configure_CanRawSender_Node.html">
        Configure a CanRawSender node
    </a>
</li>




<li>
    <a class="" href="reference/candevstudio/docs/5_Using_CanRawView.html">
        Using CanRawView
    </a>
</li>







<li>
    <a class="" href="reference/signaling/resources.html">
        Resources
    </a>
</li>











<li>
    <a class="" href="reference/audio/bluez-alsa.html">
        bluez-alsa
    </a>
</li>




<li>
    <a class="" href="reference/audio/pulseaudio-module-4a.html">
        Pulseaudio - 4A Integration Module
    </a>
</li>








<li>
    <a class="" href="reference/audio/4a-framework/README.html">
        Architecture
    </a>
</li>




<li>
    <a class="" href="reference/audio/4a-framework/concepts.html">
        Concepts
    </a>
</li>




<li>
    <a class="" href="reference/audio/4a-framework/components.html">
        Components
    </a>
</li>








<li>
    <a class="" href="reference/audio/high-level-api/README.html">
        Abstract
    </a>
</li>




<li>
    <a class="" href="reference/audio/high-level-api/kickstart.html">
        Kickstart
    </a>
</li>




<li>
    <a class="" href="reference/audio/high-level-api/reference.html">
        Reference
    </a>
</li>








<li>
    <a class="" href="reference/audio/high-level-api/TipsAndTricks/AdjustVolumes.html">
        Adjust volumes
    </a>
</li>




<li>
    <a class="" href="reference/audio/high-level-api/TipsAndTricks/4aTools.html">
        4a-tools
    </a>
</li>




<li>
    <a class="" href="reference/audio/high-level-api/TipsAndTricks/Devices.html">
        Devices
    </a>
</li>




<li>
    <a class="" href="reference/audio/high-level-api/TipsAndTricks/HALs.html">
        HALs
    </a>
</li>




















<li>
    <a class="" href="reference/hmi-framework/3_1-HomeScreen-Guide.html">
        Home Screen Developper Guide
    </a>
</li>




<li>
    <a class="" href="reference/hmi-framework/3_2-WindowManager-Guide.html">
        Window Manager Developper Guide
    </a>
</li>




<li>
    <a class="" href="reference/hmi-framework/3_3-SoundManager-Guide.html">
        Sound Manager Developper Guide
    </a>
</li>











<li>
    <a class="" href="reference/homescreen/homescreen_api.html">
        HomeScreen API
    </a>
</li>







                        </ul>
                    </div>

                    <!--
                    
                    
                        <a class="edit" href="https://github.com/automotive-grade-linux/docs-agl/edit/master/docs/signaling/architecture.md"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</a>

                    
                    
                    -->

                    <!-- Language dropdown -->
                    <!--
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="languageDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            
                            <span class="caret"></span>
                        </button>

                        <!-- List all languages - ->
                        <ul class="dropdown-menu" aria-labelledby="languageDropdown">
                            
                        </ul>
                    </div>
                    -->

                    <!-- Version dropdown -->
                    <!--
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="versionDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            dev
                            
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="versionDropdown">

                            <!-- List versions available in this language - ->
                            
                        </ul>
                    </div>
                    -->
                </div>
                

                
                
                

                
                

                <!-- Show warnings for special versions -->
                <!-- dev warning
                
                    <div class="alert docs-alert alert-info" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        Draft version of documentation under development may change!
                        <a href="/docs/en/latest/">
                            Click here for the latest released version.
                        </a>
                    </div>
                
                -->

                <!-- outdated warning
                
                -->


                <div id="page-toc-source">
                    <!-- WARNING: This file is generated by fetch_docs.js using /w/workspace/sandbox-doc-update/webdocs-agl/content/tocs/apis_services/fetched_files.yml -->

<p><strong>Table of Content</strong></p>

<ol id="markdown-toc">
  <li><a href="#context" id="markdown-toc-context">Context</a></li>
  <li><a href="#objectives" id="markdown-toc-objectives">Objectives</a></li>
  <li><a href="#architecture" id="markdown-toc-architecture">Architecture</a>    <ol>
      <li><a href="#transport-solutions" id="markdown-toc-transport-solutions">Transport Solutions</a></li>
      <li><a href="#query-and-filtering-language" id="markdown-toc-query-and-filtering-language">Query and Filtering Language</a></li>
    </ol>
  </li>
  <li><a href="#describing-signal-subscriptions-using-json" id="markdown-toc-describing-signal-subscriptions-using-json">Describing Signal Subscriptions using JSON</a></li>
  <li><a href="#naming-signal" id="markdown-toc-naming-signal">Naming Signal</a></li>
  <li><a href="#reusing-existinglegacy-code" id="markdown-toc-reusing-existinglegacy-code">Reusing existing/legacy code</a></li>
  <li><a href="#leveraging-agl-binder" id="markdown-toc-leveraging-agl-binder">Leveraging AGL binder</a></li>
  <li><a href="#multi-ecu-and-vehicule-to-cloud-interactions" id="markdown-toc-multi-ecu-and-vehicule-to-cloud-interactions">Multi-ECU and Vehicule to Cloud interactions</a></li>
</ol>

<h2 id="context">Context</h2>

<p>Automotive applications need to understand in real time the context in which
vehicles operate. In order to do so, it is critical for automotive application
to rely on a simple, fast and secure method to access data generated by the
multiple sensors/ECU embedded in modern cars.</p>

<p>This signaling problem is neither new, neither unique to the automotive and
multiple solutions often described as Message Broker or Signaling Gateway have
been around for a while.</p>

<p>The present document is the now implemented since AGL Daring Dab version, to
handle existing signaling/message in a car. It relies on [<a href="https://gerrit.automotivelinux.org/gerrit/#/q/project:src/app-framework-binder" title="AppFw Binder">APbinder</a>]
binder/bindings model to minimize complexity while keeping the system fast
around secure. We propose a model with multiple transport options and a full set
of security feature to protect the service generating the signal as well as
consuming them.</p>

<h2 id="objectives">Objectives</h2>

<p>Our objectives are solving following 3 key issues:</p>

<ol>
  <li>reduce as much as possible the amount of exchanged data to the meaningful
 subset really used by applications</li>
  <li>offer a high level API that obfuscates low level and proprietary interface to
 improve stability in time of the code</li>
  <li>hide specificities of low level implementation as well as the chosen
 deployment distribution model.</li>
</ol>

<p>To reach first objective, events emission frequency should be controlled at the
lowest level it possibly can. Aggregation, composition, treatment, filtering of
signals should be supported at software level when not supported by the hardware.</p>

<p>Second objectives of offering long term stable hight level API while allowing
flexibility in changing low level implementation may look somehow conflicting.
Nevertheless by isolating low level interface from high level and allowing
dynamic composition it is possible to mitigate both objectives.</p>

<h2 id="architecture">Architecture</h2>

<p>Good practice is often based on modularity with clearly separated components
assembled within a common framework. Such modularity ensures separation of
duties, robustness, resilience and achievable long term maintenance.</p>

<p>This document uses the term “<strong>Service</strong>” to define a specific instance of this
proposed common framework used to host a group of dedicated separated components
that handle targeted signals/events. Each service exposes to services/applications
the signals/events it is responsible for.</p>

<p>As an example, a CAN service may want to mix non-public proprietary API with
CANopen compatible devices while hiding this complexity to applications. The
goal is on one hand to isolate proprietary piece of code in such a way that it
is as transparent as possible for the remaining part of the architecture. On a
second hand isolation of code related to a specific device provides a better
separation of responsibilities, keeping all specificity related to a given
component clearly isolated and much easier to test or maintain. Last but not
least if needed this model may also help to provide some proprietary code
directly as binary and not as source code.</p>

<p>Communicating between the car and regular apps should be done using a 2 levels
AGL services which have two distincts roles:</p>

<ul>
  <li>low level should handle communication with CAN bus device (read, decoding,
 basic and efficient filtering, caching, …)</li>
  <li>high level should handle more complex tasks (signals compositions, complex
 algorythms like Kalman filter, business logic…)</li>
</ul>

<p><img src="./images/signal-service-arch.svg" alt="image" title="Signal Agent Architecture" /></p>

<p>To do so, the choice has been to use a similar architecture than [<a href="http://openxcplatform.com/">OpenXC</a>], a
Ford project. Principle is simple, from a JSON file that describes all CAN
signals wanted to be handled, in general a conversion from a <strong>dbc</strong> file, AGL
generator convert it to a C++ source code file. This file which in turn is used
as part of the low level CAN service which can now be compiled. This service
reads, decodes and serves this CAN signals to a high level CAN service that
holds business logic and high level features like described is the above
chapter.</p>

<p><img src="./images/can-generator.svg" alt="image" title="AGL CAN generator" /></p>

<p>While in some cases it may be chosen to implement a single service responsible
for everything, other scenarii may chose to split responsibility between
multiple services. Those multiple services may run on a single ECU or on
multiple ECUs. Chosen deployment distribution strategy should not impact the
development of components responsible for signals/events capture. As well as it
should have a loose impact on applications/services consuming those events.</p>

<p>A distributed capable architecture may provide multiple advantages:</p>

<ul>
  <li>it avoids to concentrate complexity in a single big/fat component.</li>
  <li>it leverages naturally multiple ECUs and existing network architecture</li>
  <li>it simplifies security by enabling isolation and sandboxing</li>
  <li>it clearly separates responsibilities and simplifies resolution of conflicts</li>
</ul>

<p>Distributed architecture has to be discussed and about now is not fully
implemented. Low level CAN service isn’t fully functional nor tested to assume
this feature but its architecture let the possibility open and will be
implemented later.</p>

<p><img src="./images/distributed-arch.png" alt="image" title="Distributed Architecture" /></p>

<p>Performance matters. There is a trade-off between modularity and efficiency.
This is specially critical for signals where propagation time from one module to
the other should remain as short as possible and furthermore should consume as
little computing resources as possible.</p>

<p>A flexible solution should provide enough versatility to either compose modules
in separate processes; either chose a model where everything is hosted within a
single process. Chosen deployment model should have minor or no impact on
development/integration processes. Deployment model should be something easy to
change, it should remain a tactical decision and never become a structuring
decision.</p>

<p>Nevertheless while grouping modules may improve performance and reduce resource consumption, on the other hand,
it has a clear impact on security. No one should forget that some signals have very different level of security from other ones.
Mixing everything within a single process makes all signal’s handling within a single security context.
Such a decision may have a significant impact on the level on confidence one may have in the global system.</p>

<p>Providing such flexibility constrains the communication model used by modules:</p>

<ul>
  <li>The API of integration of the modules (the API of the framework) that enables
the connection of modules must be independent of the implementation of
the communication layer</li>
  <li>The communication layer must be as transparent as possible, its
implementation shouldn’t impact how it is used</li>
  <li>The cost of the abstraction for modules grouped in a same process
must be as little as possible</li>
  <li>The cost of separating modules with the maximum of security must remain as
 minimal as possible</li>
</ul>

<p>Another point impacting performance relates to a smart limitation on the number
of emitted signals. Improving the cost of sending a signal is one thing,
reducing the number of signals is an other one. No one should forget that the
faster you ignore a useless signal the better it is. The best way to achieve
this is by doing the filtering of useless signal as close as possible of the
component generating the signal and when possible directly at the hardware level.</p>

<p>To enable the right component to filter useless signals, consumer clients must
describe precisely the data they need. A filter on frequency is provided since
Daring Dab version, as well as minimum and maximum limits. These filters can be 
specified at subscription time. Also, any data not required by any client should
at the minimum never be transmitted. So only changed data is transmitted and if
another service needs to receive at a regular time, it has to assume that if no
events are received then it is that the value hasn’t change. Furthermore when
possible then should even not be computed at all, a CAN signal received on
socket is purely ignored if no one asks for it.</p>

<p>Describing expected data in a precise but nevertheless simple manner remains a
challenge. It implies to manage:</p>

<ul>
  <li>requested frequency of expected data</li>
  <li>accuracy of data to avoid detection of inaccurate changes</li>
  <li>when signaling is required (raising edge, falling edge,
on maintained state, …),</li>
  <li>filtering of data to avoid glitches and noise,</li>
  <li>composition of signals both numerically and logically (adding,
subtracting, running logical operators like AND/OR/XOR, getting the mean, …)</li>
  <li>etc…</li>
</ul>

<p>It is critical to enable multiple features in signal queries to enable modules
to implement the best computing method. The best computing method may have an
impact on which device to query as well as on which filters should be applied.
Furthermore filtering should happen as soon as possible and obviously when
possible directly at hardware level.</p>

<h3 id="transport-solutions">Transport Solutions</h3>

<p>D-Bus is the standard choice for Linux, nevertheless it has some serious
performance limitation due to internal verbosity. Nevertheless because it is
available and pre-integrated with almost every Linux component, D-Bus may still
remains an acceptable choice for signal with low rate of emission (i.e. HMI).</p>

<p>For a faster communication, Jaguar-Land-Rover proposes a memory shared signal
infrastructure. Unfortunately this solution is far from solving all issues and
has some drawbacks. Let check the open issues it has:</p>

<ul>
  <li>there is no management of what requested data are. This
 translate in computing data even when not needed.</li>
  <li>on top of shared memory, an extra side channel is required for processes
 to communicate with the daemon.</li>
  <li>a single shared memory implies a lot of concurrency handling. This might
 introduce drawbacks that otherwise would be solved through communication
 buffering.</li>
</ul>

<p>ZeroMQ, NanoMSG and equivalent libraries focused on fast communication. Some
(e.g. ZeroMQ) come with a commercial licensing model when others (e.g. NanoMSG)
use an open source licensing. Those solutions are well suited for both
communicating inside a unique ECU or across several ECUs. However, most of them
are using Unix domain sockets and TCP sockets and typically do not use shared
memory for inter-process communication.</p>

<p>Last but not least Android binder, Kdbus and other leverage shared memory, zero
copy and sit directly within Linux kernel. While this may boost information
passing between local processes, it also has some limitations. The first one is
the non support of a multi-ECU or vehicle to cloud distribution. The second one
is that none of them is approved upstream in kernel tree. This last point may
create some extra burden each time a new version of Linux kernel is needed or
when porting toward a new hardware is required.</p>

<h3 id="query-and-filtering-language">Query and Filtering Language</h3>

<p>Description language for filtering of expected data remains an almost green
field where nothing really fit signal service requirements. Languages like
Simulink or signal processing graphical languages are valuable modelling tools.
Unfortunately they cannot be inserted in the car. Furthermore those languages
have many features that are not useful in proposed signal service context and
cost of integrating such complex languages might not be justified for something
as simple as a signal service. The same remarks apply for automation languages.</p>

<p>Further investigations leads to some specifications already presents like the
one from Jaguar Land Rover [<a href="http://rawgit.com/w3c/automotive/gh-pages/vehicle_data/vehicle_information_service.html">VISS</a>], for <strong>Vehicule Information Service
Specification</strong> and another from Volkwagen AG named [<a href="https://www.w3.org/Submission/2016/SUBM-viwi-protocol-20161213/">ViWi</a>], stand for
<strong>Volkwagen Infotainment Web Interface</strong>. Each ones has their differences and
provides different approach serving the same goal:</p>

<table>
  <thead>
    <tr>
      <th>VISS</th>
      <th>ViWi</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Filtering on node (not possible on several nodes or branches)</td>
      <td>Describe a protocol</td>
    </tr>
    <tr>
      <td>Access restrictions to signals</td>
      <td>Ability to specify custom signals</td>
    </tr>
    <tr>
      <td>Use high level development languages</td>
      <td>RESTful HTTP calls</td>
    </tr>
    <tr>
      <td>One big Server that handle requests</td>
      <td>Stateless</td>
    </tr>
    <tr>
      <td>Filtering</td>
      <td>Filtering, sorting</td>
    </tr>
    <tr>
      <td>Static signals tree not extensible [<a href="https://github.com/GENIVI/vehicle_signal_specification">VSS</a>]</td>
      <td>Use JSON objects to communicate</td>
    </tr>
    <tr>
      <td>Use of AMB ?</td>
      <td>Identification of resources may be a bit heavy going using UUID</td>
    </tr>
    <tr>
      <td>Use of Websocket</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>About <strong>[<a href="http://rawgit.com/w3c/automotive/gh-pages/vehicle_data/vehicle_information_service.html">VISS</a>]</strong> specification, the major problem comes from the fact that
signals are specified under the [<a href="https://github.com/GENIVI/vehicle_signal_specification">VSS</a>], <strong>Vehicle Signal Specification</strong>. So,
problem is that it is difficult, if not impossible, to make a full inventory
of all signals existing for each car. More important, each evolution in signals
must be reported in the specification and it is without seeing the fact that
car makers have their names and set of signals that would mostly don’t
comply with the [<a href="https://github.com/GENIVI/vehicle_signal_specification">VSS</a>]. VISS doesn’t seems to be an valuable way to handle
car’s signals, a big component that responds requests, use of <strong>Automotive
Message Broker</strong> that use DBus is a performance problem. Fujitsu Ten recent
study[<a href="http://schd.ws/hosted_files/aglmmwinter2017/37/20170201_AGL-AMM_F10_kusakabe.pdf">1</a>] highlights that processor can’t handle an heavy load on CAN bus and
that Low level binding adopted for AGL is about 10 times[<a href="https://wiki.automotivelinux.org/_media/agl-distro/20170402_ften_can_kusakabe_v2.pdf">2</a>] less impact on
performance.</p>

<h2 id="describing-signal-subscriptions-using-json">Describing Signal Subscriptions using JSON</h2>

<p>JSON is a rich structured representation of data. For requested data, it allows
the expression of multiple features and constraints. JSON is both very flexible
and efficient. There are significant advantages in describing requested data at
subscription time using a language like JSON. Another advantage of JSON is that
no parser is required to analyse the request.</p>

<p>Existing works exists to describe a signals that comes first from Vector with
its proprietary database (<code class="highlighter-rouge">DBC</code>) which widely used in industry. Make a
description based on this format appears to be a good solution and Open Source
community already has existing tools that let you convert proprietary file
format to an open one. So, a JSON description based on work from [<a href="http://openxcplatform.com/">OpenXC</a>] is
specified <a href="https://github.com/openxc/vi-firmware/blob/master/docs/config/reference.rst">here</a>
which in turn is used in Low level CAN service in AGL:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">   </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"extra_sources"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nt">"initializers"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nt">"loopers"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nt">"buses"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nt">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nt">"0x3D9"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"bus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hs"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"signals"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"PT_FuelLevelPct"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"generic_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fuel.level"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"bit_position"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="nt">"bit_size"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.392157</span><span class="p">,</span><span class="w">
        </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"PT_EngineSpeed"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"generic_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"engine.speed"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"bit_position"</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w">
        </span><span class="nt">"bit_size"</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w">
        </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w">
        </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"PT_FuelLevelLow"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"generic_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fuel.level.low"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"bit_position"</span><span class="p">:</span><span class="w"> </span><span class="mi">55</span><span class="p">,</span><span class="w">
        </span><span class="nt">"bit_size"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"decoder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"decoder_t::booleanDecoder"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>From a description like the above one, low level CAN generator will output
a C++ source file which let low level CAN service that uses it to handle such
signal definition.</p>

<h2 id="naming-signal">Naming Signal</h2>

<p>Naming and defining signals is something very complex. For example just
<strong><em>speed</em></strong>, as a signal, is difficult to define.
What unit is used (km/h, M/h, m/s, …)?
From which source (wheels, GPS, AccelMeter)?
How was it captured (period of measure, instantaneous, mean, filtered)?</p>

<p>In order to simplify application development we should nevertheless agree on
some naming convention for key signals. Those names might be relatively complex
and featured. They may include a unit, a rate, a precision, etc.</p>

<p>How these names should be registered, documented and managed is out of scope of
this document but extremely important and at some point in time should be
addressed. Nevertheless this issue should not prevent from moving forward
developing a modern architecture. Developers should be warned that naming is a
complex task, and that in the future naming scheme should be redefined, and
potential adjustments would be required.</p>

<p>About Low level CAN signals naming a doted notation, like the one used by Jaguar
Landrover, is a good compromise as it describe a path to an car element. It
separates and organize names into hierarchy. From the left to right, you
describe your names using the more common ancestor at the left then more you go
to the right the more it will be accurate. Using this notation let you subscribe
or unsubscribe several signals at once using a globbing expression.</p>

<p>Example using OBD2 standard PID:</p>

<pre><code class="language-path">engine.load
engine.coolant.temperature
fuel.pressure
intake.manifold.pressure
engine.speed
vehicle.speed
intake.air.temperature
mass.airflow
throttle.position
running.time
EGR.error
fuel.level
barometric.pressure
commanded.throttle.position
ethanol.fuel.percentage
accelerator.pedal.position
hybrid.battery-pack.remaining.life
engine.oil.temperature
engine.torque
</code></pre>

<p>Here you can chose to subscribe to all engine component using an expression
like : <code class="highlighter-rouge">engine.*</code></p>

<h2 id="reusing-existinglegacy-code">Reusing existing/legacy code</h2>

<p>About now provided services use:</p>

<ul>
  <li>
    <p><strong>Low Level</strong> [<a href="http://openxcplatform.com/">OpenXC</a>] project provides logic and some useful libraries to
 access a CAN bus. It is the choice for AGL.</p>
  </li>
  <li>
    <p><strong>High Level</strong> In many cases accessing to low level signal is not enough.
Low level information might need to be composed (i.e. GPS+Gyro+Accel).
Writing this composition logic might be quite complex and reusing existing
libraries like: LibEkNav for Kalman filtering [<a href="https://bitbucket.org/jbrandmeyer/libeknav/wiki/Home">9</a>] or Vrgimbal for 3 axes
control[<a href="http://ardupilot.org/rover/docs/common-vrgimbal.html">10</a>] may help saving a lot of time. AGL apps should access CAN 
signals through High Level service. High level can lean on as many low level
service as needed to compute its <strong>Virtual signals</strong> coming from differents
sources. Viwi protocol seems to be a good solution.</p>
  </li>
</ul>

<h2 id="leveraging-agl-binder">Leveraging AGL binder</h2>

<p>Such a model is loosely coupled with AGL binder. Low level CAN service as well
as virtual signal components may potentially run within any hosting environment
that would provide the right API with corresponding required facilities.
Nevertheless leveraging [<a href="https://gerrit.automotivelinux.org/gerrit/#/q/project:src/app-framework-binder" title="AppFw Binder">APbinder</a>] has multiple advantages. It already
implements event notification to support a messaging/signaling model for
distributed services. It enables a subscribe model responding to the
requirement and finally it uses JSON natively.</p>

<p>This messaging/signalling model already enforces the notion of subscription for
receiving data. It implies that unexpected data are not sent and merely not
computed. When expected data is available, it is pushed to all waiting
subscriber only one time.</p>

<p>The [<a href="https://gerrit.automotivelinux.org/gerrit/#/q/project:src/app-framework-binder" title="AppFw Binder">APbinder</a>] provides transparency of communication.
It currently implements the transparency over D-Bus/Kdbus and WebSocket.
Its transparency mechanism of communication is easy to extend to other
technologies: pools of shared memory or any proprietary transport model.</p>

<p>When bindings/services are loaded by the same binder, it provides transparently
<code class="highlighter-rouge">in-memory</code> communication. This in-memory communication is really efficient: on
one hand, the exchanged JSON objects are not serialized (because not streamed),
on the other hand, those JSON objects provide a high level of abstraction able
to transfer any data.</p>

<p>Technically a service is a standard [<a href="https://gerrit.automotivelinux.org/gerrit/#/q/project:src/app-framework-binder" title="AppFw Binder">APbinder</a>] binding which is also handled
by the system and launched as a daemon by systemD.
Therefore Signal/Agent inherits of security protection through SMACK, access
control through Cynara, transparency of API to transport layer, life cycle
management, … Like any other [<a href="https://gerrit.automotivelinux.org/gerrit/#/q/project:src/app-framework-binder" title="AppFw Binder">APbinder</a>] process is composed of a set of
bindings. In signal service specific case, those bindings are in fact the
<code class="highlighter-rouge">signal modules</code>.</p>

<p>The proposed model allows to implement low level dependencies as independent
signal modules. Those modules when developed are somehow like “Lego Bricks”.
They can be spread or grouped within one or multiple services depending on
deployment constraints (performance, multi-ECU, security &amp; isolation
constraints,…).</p>

<p>On top of that low level signal modules, you should use a high level service.
A first implementation of [<a href="https://www.w3.org/Submission/2016/SUBM-viwi-protocol-20161213/">ViWi</a>] is available <a href="https://github.com/iotbzh/high-level-viwi-service">here</a>
and can be use to integrate business logic and high level features.</p>

<p>The model naturally uses JSON to represent data.</p>

<h2 id="multi-ecu-and-vehicule-to-cloud-interactions">Multi-ECU and Vehicule to Cloud interactions</h2>

<p>While this might not be a show stopper for current projects, it is obvious that
in the near future Signal/Agent should support a fully distributed
architectures. Some event may come from the cloud (i.e. request to start
monitoring a given feature), some may come from SmartCity and nearby vehicles,
and last but not least some may come from another ECU within the same vehicle or
from a virtualized OS within the same ECU (e.g. cluster &amp; IVI). In order to do
so, Signal modules should enable composition within one or more [<a href="https://gerrit.automotivelinux.org/gerrit/#/q/project:src/app-framework-binder" title="AppFw Binder">APbinder</a>]
inside the same ECU. Furthermore they should also support chaining with the
outside world.</p>

<p><img src="./images/cloud-arch.svg" alt="image" title="Cloud &amp; Multi-ECU Architecture" /></p>

<ol>
  <li>Application requests Virtual Signal exactly like if it was a low level signal</li>
  <li>Agent Signal has direct relation to low level signal</li>
  <li>Agent needs to proxy to an other service inside the same ECU to access the signal</li>
  <li>Signal is not present on current ECU. Request has to be proxied to the outside world</li>
</ol>




                </div>
            </div>
        </div>
        <div class="row">
            <div class="blue-divider"></div>
<footer>
    <div class="container-fluid">
        <div class="row">
    <div class="col-sm-9">
        <h1>More Resources</h1>
        <div class="row">
            <div class="col-sm-4">
                <h2>General</h2>
                <ul class="nav">
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/">AGL Developer Community</a>
                    </li>
                    <li>
                        <a href="https://www.automotivelinux.org/software/download/">Download Distribution</a>
                    </li>
                    <li>
                        <a href="https://gerrit.automotivelinux.org/gerrit/#/admin/projects/">Source Code on Git</a>
                    </li>
                    <li>
                        <a target="_blank" href="/contact">Mailing List</a>
                    </li>
                </ul>
            </div>
            <div class="col-sm-4">
                <h2>Development</h2>
                <ul class="nav">
                    <li><a target="_blank" href="https://wiki.automotivelinux.org/agl-distro/source-code">Source Code</a></li>
                    <li><a target="_blank" href="https://jira.automotivelinux.org/browse/SPEC/?selectedTab=com.atlassian.jira.jira-projects-plugin:summary-panel">Issue Tracker</a></li>
                    <li><a target="_blank" href="https://wiki.automotivelinux.org/">Wiki</a></li>
                    <li><a href="https://www.automotivelinux.org/contact-us">Contact</a></li>
                </ul>
            </div>
            <div class="col-sm-4">
                <h2>Automotive Grade Linux @ Linux Foundation</h2>
                <ul class="nav">
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/">About AGL</a>
                    </li>
                    <li>
                        <a target="_blank" href="http://www.linuxfoundation.org/">About Linux Foundation</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://wiki.automotivelinux.org/start/getting-started">Join AGL community</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/about/members">Members</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-sm-3">
        <h1>Contribute</h1>
        <p style="padding-top:20px"><strong>Help AGL move forward!</strong></p>
        <p>Report bugs, improve the docs, or contribute to the code.</p>
        <a href="/contribute" class="btn btn-lg btn-primary">
            Learn More
        </a>
        <p style="padding-top:20px"> <a href="https://twitter.com/autogradelinux" class="twitter-follow-button" data-show-count="false">Follow @autogradelinux</a></p>
    </div>
</div>
<div class="row">
	<div class="col-sm-9">
		<p class="copyright_text">
			Copyright &copy; 2015-2018 Automotive Grade Linux Documentation, Licensed under the <a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
			<br/>
			Automotive Grade Linux and logos are <a target="_blank" href="http://www.linuxfoundation.org">trademarks</a> of The Linux Foundation.
			<br/>
			Initial site design from <a href="https://cordova.apache.org/">Cordova website.</a> - warm thanks !
		</p>
	</div>
    <div class="col-sm-3">
		<small class="stats">Page rendered at:  2019-02-17 00:04:02 +0000</small>
		
		<br/><small class="stats"><a href="https://raw.githubusercontent.com/automotive-grade-linux/docs-agl/master/docs/signaling/architecture.md">Link to source document</small>
		
	</div>
</div>

    </div>
</footer>

        </div>
    </div>
</div>

<script defer type="text/javascript" src="/static/js/lib/toc.min.js"></script>
<script defer type="text/javascript" src="/static/js/docs.js"></script>

    <script defer type="text/javascript" src="/static/js/twitter.js"></script>
    



<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
    docsearch({
        apiKey: 'edd30bcff9f6df4b095c41cba3e5a418',
        indexName: 'automotivelinux',
        inputSelector: '#header-search-field',
    });
</script>

            
    

</body>
</html>
